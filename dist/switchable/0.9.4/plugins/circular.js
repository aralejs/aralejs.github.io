define("#switchable/0.9.4/plugins/circular",["jquery","./effects"],function(require,exports,module){function adjustPosition(isBackward,prop,viewDiff){var step=this.get("step"),len=this.get("length"),start=isBackward?len-1:0,from=start*step,to=(start+1)*step,diff=isBackward?viewDiff:-viewDiff*len,toPanels=$(this.panels.get().slice(from,to));return toPanels.css("position","relative"),toPanels.css(prop,-diff+"px"),diff}function resetPosition(isBackward,prop,viewDiff){var step=this.get("step"),len=this.get("length"),start=isBackward?len-1:0,from=start*step,to=(start+1)*step,toPanels=$(this.panels.get().slice(from,to));toPanels.css("position",""),toPanels.css(prop,""),this.content.css(prop,isBackward?-viewDiff*(len-1):"")}var $=require("jquery"),SCROLLX="scrollx",SCROLLY="scrolly",Effects=require("./effects").Effects;module.exports={isNeeded:function(){var effect=this.get("effect"),circular=this.get("circular");return circular&&(effect===SCROLLX||effect===SCROLLY)},install:function(){this.set("scrollType",this.get("effect")),this.set("effect","scrollCircular")}},Effects.scrollCircular=function(panelInfo){var toIndex=panelInfo.toIndex,fromIndex=panelInfo.fromIndex,len=this.get("length"),isBackwardCritical=fromIndex===0&&toIndex===len-1,isForwardCritical=fromIndex===len-1&&toIndex===0,isBackward=isBackwardCritical||!isForwardCritical&&toIndex<fromIndex,isCritical=isBackwardCritical||isForwardCritical,isX=this.get("scrollType")===SCROLLX,prop=isX?"left":"top",viewDiff=this.get("viewSize")[isX?0:1],diff=-viewDiff*toIndex;this.anim&&this.anim.stop(!1,!0),isCritical&&(diff=adjustPosition.call(this,isBackward,prop,viewDiff));var props={};props[prop]=diff+"px";if(fromIndex>-1){var duration=this.get("duration"),easing=this.get("easing"),that=this;this.anim=this.content.animate(props,duration,easing,function(){that.anim=null,isCritical&&resetPosition.call(that,isBackward,prop,viewDiff)})}else this.content.css(props)}});