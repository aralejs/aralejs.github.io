define("#validator/0.8.0/core",["$","./async","widget","./parser","./item","daparser","./rule"],function(a,b,c){function n(a){var b=a.element.attr(m);return b||(b=a.cid,a.element.attr(m,b)),b}function o(a){return d.each(a,function(b,c){c=="true"?a[b]=!0:c=="false"&&(a[b]=!1)}),a}function p(a,b){d.each(b,function(b,c){a[c]=l.helper(a[c])})}var d=a("$"),e=a("./async"),f=a("widget"),g=a("./parser"),h=a("./item"),i=a("daparser"),j=[],k={},l=f.extend({attrs:{triggerType:"blur",checkOnSubmit:!0,stopOnError:!1,autoSubmit:!0,checkNull:!0},setup:function(){this.element.attr("novalidate","novalidate"),this.items=[];var a=this;this.get("checkOnSubmit")&&this.element.submit(function(b){b.preventDefault(),a.execute(function(b){b||a.get("autoSubmit")&&a.element.get(0).submit()})}),j.push(this)},Statics:d.extend({},a("./rule"),{autoRender:function(a){var b=o(a);p(b,["onItemValidate","onItemValidated","onFormValidate","onFormValidated"]);var c=new l(b);d("input, textarea, select",c.element).each(function(a,b){if(!c.query(b)){b=d(b);var e={},f=b.attr("type");f=="radio"||f=="checkbox"?e.element=d("[type="+f+"][name="+b.attr("name")+"]",c.element):e.element=b;var h=g.parseDom(b),j=o(i.parseElement(b));d.extend(e,j,h),p(e,["onItemValidate","onItemValidated"]),c.addItem(e)}})},query:function(a){var b=d(a),c=null;return d.each(j,function(a,d){if(b.get(0)==d.element.get(0))return c=d,!1;var e=d.query(b);if(e)return c=e,!1}),c},helper:function(a,b){return b?(k[a]=b,this):k[a]}}),addItem:function(a){var b=new h(d.extend({triggerType:this.get("triggerType"),checkNull:this.get("checkNull")},a));return this.items.push(b),b.set("_handler",function(){if(!b.get("required")&&!b.element.val())return;if(!b.get("checkNull")&&!b.element.val())return;b.execute()}),this.element.on(b.get("triggerType"),"["+m+"="+n(b)+"]",b.get("_handler")),b.on("all",function(a){this.trigger.apply(this,[].slice.call(arguments,0))},this),this},removeItem:function(a){var b=a instanceof h?a.element:d(a),c=this.items,e=this,f;return d.each(this.items,function(a,c){if(b.get(0)==c.element.get(0))return f=a,e.element.off(c.get("triggerType"),"["+m+"="+n(c)+"]",c.get("_handler")),c.destroy(),!1}),f!==undefined&&this.items.splice(f,1),this},execute:function(a){var b=this;this.trigger("formValidate");var c=function(c){b.trigger("formValidated",Boolean(c)),a&&a(Boolean(c))};if(this.get("stopOnError")){var f={};d.each(this.items,function(a,b){f[a]=function(a){b.execute(a)}}),e.series(f,c)}else e.forEach(this.items,function(a,b){a.execute(b)},c);return this},destroy:function(){this.element.unbind("submit");var a=this;d.each(this.items,function(b,c){a.removeItem(c)});var b;d.each(j,function(a,c){if(c==this)return b=a,!1}),j.splice(b,1),l.superclass.destroy.call(this)},query:function(a){var b=d(a);if(b.length==0||d(b,this.element).length==0)return null;var c=null;return d.each(this.items,function(a,d){if(b.get(0)==d.element.get(0))return c=d,!1}),c}}),m="data-validator-set";c.exports=l});