define("#validator/0.8.0/parser",["$","./rule"],function(require,exports,module){function unique(){return"__anonymous__"+u_count++}function parseRule(a){var b=a.match(/([^{}:\s]*)(\{[^\{\}]*\})?/);return{name:b[1],param:parseJSON(b[2])}}function parseJSON(str){function getValue(str){return str[0]=='"'&&str[str.length-1]=='"'||str[0]=="'"&&str[str.length-1]=="'"?eval(str):str}if(!str)return null;var NOTICE='Invalid option object "'+str+'".';str=str.slice(1,-1);var result={},arr=str.split(",");return $.each(arr,function(a,b){arr[a]=$.trim(b);if(!arr[a])throw NOTICE;var c=arr[a].split(":"),d=$.trim(c[0]),e=$.trim(c[1]);if(!d||!e)throw NOTICE;result[getValue(d)]=$.trim(getValue(e))}),result}function parseRules(a){return a?a.match(/[a-zA-Z0-9\-\_]+(\{.*\})?/g):null}function parseDom(a){var a=$(a),b={},c=[],d=a.attr("required");d&&(c.push("required"),b.required=!0);var e=a.attr("type");if(e&&e!="submit"&&e!="cancel"&&e!="checkbox"&&e!="radio"&&e!="select"&&e!="select-one"){if(!Rule.getRule(e))throw new Error('Form field with type "'+e+'" not supported!');c.push(e)}var f=a.attr("min");f&&c.push('min{"min":"'+f+'"}');var g=a.attr("max");g&&c.push("max{max:"+g+"}");var h=a.attr("minlength");h&&c.push("minlength{min:"+h+"}");var i=a.attr("maxlength");i&&c.push("maxlength{max:"+i+"}");var j=a.attr("pattern");if(j){var k=new RegExp(j),l=unique();Rule.addRule(l,k),c.push(l)}var m=a.attr("data-rule");return m=m&&parseRules(m),m&&(c=c.concat(m)),b.rule=c.length==0?null:c.join(" "),b}var $=require("$"),Rule=require("./rule"),u_count=0;module.exports={parseRule:parseRule,parseRules:parseRules,parseDom:parseDom}});